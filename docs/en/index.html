<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Mix // Master - Suburbio Studios</title>
 <!-- Fuente Bruno Ace SC -->
<link href="https://fonts.googleapis.com/css2?family=Bruno+Ace+SC&display=swap" rel="stylesheet">
<link rel="stylesheet" href="styles.css" />
<link rel="icon" href="/favicon.png" type="image/png">

<style>
:root{
  --bg:#111; --card:#1c1c1c; --accent:#ff4a4a; --muted:#aaa; --white:#f1f1f1;
}
body{
  margin:0; padding:0;
  background:var(--bg);
  color:var(--white);
  font-family:Montserrat,system-ui,Segoe UI,Roboto,sans-serif;
}
header{
  background:#000; padding:2rem 1rem; text-align:center;
}
header h1{ margin:0; font-weight:300; font-size:2rem; }
header p{ margin:6px 0 0; color:var(--muted); }

.projects-wrapper{
  max-width:1200px;
  margin:2rem auto;
  padding:0 1rem;
}
h2{
  text-align:center;
  margin-bottom:1rem;
  display:inline-block;
  border-bottom:2px solid var(--accent);
  padding-bottom:6px;
}
.projects-grid{
  display:grid;
  gap:20px;
  margin-top:1rem;
  grid-template-columns:repeat(1,1fr);
}
@media (min-width:700px){
  .projects-grid{ grid-template-columns:repeat(2,1fr); }
}

.project-card{
  background:var(--card);
  padding:18px;
  border-radius:12px;
  box-shadow:0 6px 18px rgba(0,0,0,.5);
  display:flex;
  flex-direction:column;
  align-items:center;
}
.project-card:hover{
  transform:translateY(-4px);
  transition:transform .18s;
}
.project-thumbnail{
  width:100%;
  height:160px;
  object-fit:cover;
  border-radius:8px;
  margin-bottom:12px;
}
.project-card h3{ margin:0 0 8px; font-size:16px; text-align:center; }

.audio-wrapper{
  width:100%; margin-top:8px; display:flex; flex-direction:column; align-items:center;
}
.controls{
  width:100%; display:flex; align-items:center; gap:10px;
}
.play-btn{
  background:transparent; border:0; padding:6px; margin:0;
  display:inline-flex; align-items:center; justify-content:center;
  cursor:pointer; color:var(--white); width:36px; height:36px;
  border-radius:50%; outline:none;
}
.play-btn:focus{ box-shadow:0 0 0 2px rgba(255,74,74,0.15); }
.play-btn svg{display:block}
.time{ font-family:monospace; font-size:13px; color:var(--muted); min-width:60px; text-align:center; }
.progress{flex:1} input[type=range]{width:100%;}

.toggle-wrapper{ display:flex; align-items:center; justify-content:center; gap:10px; margin-top:10px; }
.toggle-btn{ position:relative; width:70px; height:34px; background:#555; border-radius:20px; cursor:pointer; display:flex; align-items:center;}
.toggle-circle{ position:absolute; width:32px; height:32px; background:#fff; border-radius:50%; top:1px; left:1px; transition:left .18s; }
.toggle-btn.active{ background:var(--accent);}
.toggle-btn.active .toggle-circle{ left:36px; }
.label-before,.label-after{ font-weight:700; font-size:14px; color:var(--white); }

footer{ text-align:center; padding:2rem 1rem; background:#000; margin-top:2.5rem; color:var(--muted); }
@media (max-width:420px){ .controls{flex-direction:column;align-items:stretch} .time{min-width:auto} }
</style>
</head>
<body>
  <header class="header-container">

    <!-- LOGO -->
    <div class="logo">
      <img src="images/logo_svg_web_2.png" alt="Suburbio Studios Logo" />
    </div>
    
    <!-- CENTRO -->
    <div class="header-center">
      <h1>Suburbio Studios</h1>
      <div class="slogan">MAKE NEW NOISE</div>
      <nav role="navigation">
        <button class="menu-toggle" aria-label="Open menu">☰</button>
        <ul class="menu">
          <li><a href="https://suburstudios.com">Home</a></li>
          <li><a href="https://mixmaster.suburstudios.com/">Projects</a></li>
          <li><a href="https://forms.gle/58ATAi5hbpnQcdoU6">Contact</a></li>
        </ul>
      </nav>
    </div>
  
    <!-- REDES SOCIALES -->
    <div class="social-icons-container" aria-label="Social Networks">
      <a href="https://www.instagram.com/suburbiostudio" target="_blank" aria-label="Instagram">
        <svg viewBox="0 0 24 24" fill="currentColor" width="28" height="28" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 2.163c3.204 0 3.584.012 4.849.07 1.366.062 2.633.347 3.608 1.322.975.975 1.26 2.242 1.322 3.608.058 1.265.07 1.645.07 4.849s-.012 3.584-.07 4.849c-.062 1.366-.347 2.633-1.322 3.608-.975.975-2.242 1.26-3.608 1.322-1.265.058-1.645.07-4.849.07s-3.584-.012-4.849-.07c-1.366-.062-2.633-.347-3.608-1.322-.975-.975-1.26-2.242-1.322-3.608C2.175 15.584 2.163 15.204 2.163 12s.012-3.584.07-4.849c.062-1.366.347-2.633 1.322-3.608.975-.975 2.242-1.26 3.608-1.322C8.416 2.175 8.796 2.163 12 2.163zm0-2.163C8.741 0 8.332.012 7.052.07 5.78.127 4.602.417 3.635 1.384 2.667 2.352 2.377 3.53 2.32 4.802.012 8.332 0 8.741 0 12s.012 3.668.07 4.948c.057 1.272.347 2.45 1.315 3.417.967.967 2.145 1.257 3.417 1.315C8.332 23.988 8.741 24 12 24s3.668-.012 4.948-.07c1.272-.057 2.45-.347 3.417-1.315.967-.967 1.257-2.145 1.315-3.417C23.988 15.668 24 15.259 24 12s-.012-3.668-.07-4.948c-.057-1.272-.347-2.45-1.315-3.417-.967-.967-2.145-1.257-3.417-1.315C15.668.012 15.259 0 12 0zm0 5.838a6.162 6.162 0 1 0 0 12.324 6.162 6.162 0 0 0 0-12.324zm0 10.162a3.999 3.999 0 1 1 0-7.998 3.999 3.999 0 0 1 0 7.998zm6.406-11.845a1.44 1.44 0 1 0 0 2.879 1.44 1.44 0 0 0 0-2.879z"/>
        </svg>
      </a>
      <a href="https://www.facebook.com/suburstudios" target="_blank" aria-label="Facebook">
        <svg viewBox="0 0 24 24" fill="currentColor" width="28" height="28" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 0C5.373 0 0 5.373 0 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078V12h3.047V9.356c0-3.007 1.792-4.668 4.533-4.668 1.312 0 2.686.235 2.686.235v2.953h-1.513c-1.49 0-1.953.926-1.953 1.874V12h3.328l-.532 3.469h-2.796v8.385C19.612 22.954 24 17.99 24 12c0-6.627-5.373-12-12-12z"/>
        </svg>
      </a>
      <a href="https://www.youtube.com/channel/UCsItmwJBywstgw_Twjzrq-A" target="_blank" aria-label="YouTube">
        <svg viewBox="0 0 24 24" fill="currentColor" width="28" height="28" xmlns="http://www.w3.org/2000/svg">
          <path d="M23.498 6.186a2.994 2.994 0 0 0-2.108-2.12C19.411 3.5 12 3.5 12 3.5s-7.411 0-9.39.566a2.994 2.994 0 0 0-2.108 2.12A31.493 31.493 0 0 0 0 12a31.493 31.493 0 0 0 .502 5.814 2.994 2.994 0 0 0 2.108 2.12C4.589 20.5 12 20.5 12 20.5s7.411 0 9.39-.566a2.994 2.994 0 0 0 2.108-2.12A31.493 31.493 0 0 0 24 12a31.493 31.493 0 0 0-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
        </svg>
      </a>
    </div>
  
    <!-- SCRIPT MENÚ DESPLEGABLE -->
    <script>
      const toggle = document.querySelector('.menu-toggle');
      const menu = document.querySelector('.menu');
      toggle.addEventListener('click', () => {
        menu.classList.toggle('show');
      });
    </script>
  
   <!-- ESTILOS -->
    <style>
      header.header-container {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 1.5rem 1rem;
        background: #000;
      }
  
      /* LOGO */
      .logo img {
        height: 100px;
        width: auto;
      }
  
      /* CENTRO */
      .header-center {
        flex: 1;
        text-align: center;
      }
  
      header h1 {
        font-family: 'Bruno Ace SC', sans-serif;
        font-weight: normal;
        font-size: 3rem;
        margin: 0;
      }
  
      .slogan {
        font-weight: 400;
        letter-spacing: 0.3rem;
        color: #aaa;
        margin: 0.5rem 0 1rem;
        font-size: 1.25rem;
      }
  
      /* NAV */
      nav .menu {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
        list-style: none;
        padding: 0;
        margin: 0;
      }
  
      nav .menu li a {
        color: #fff;
        text-decoration: none;
        font-weight: 700;
      }
  
      .menu-toggle {
        display: none;
        font-size: 2rem;
        background: none;
        border: none;
        color: #fff;
        cursor: pointer;
        margin-bottom: 0.5rem;
      }
  
      /* REDES SOCIALES */
      .social-icons-container {
        display: flex;
        gap: 1rem;
      }
  
      .social-icons-container a {
        color: #fff;
        transition: transform 0.2s ease, color 0.2s ease;
      }
  
      .social-icons-container a:hover {
        transform: scale(1.2);
        color: #e63946;
      }
  
      /* RESPONSIVE */
      @media (max-width: 767px) {
        header.header-container {
          flex-direction: column;
          align-items: center;
        }
  
        .menu-toggle {
          display: block;
          margin: 0.5rem auto;
        }
  
        nav .menu {
          flex-direction: column;
          gap: 1rem;
          margin-top: 0.5rem;
          background: #111;
          padding: 1rem;
          border-radius: 0.5rem;
          display: none;
        }
  
        nav .menu.show {
          display: flex;
        }
  
        .social-icons-container {
          margin-top: 1rem;
          justify-content: center;
        }
      }
    </style>
</header>

<div class="projects-wrapper">

  <h2>Mix Projects</h2>
  <div class="projects-grid">
    <div class="project-card" data-before="/es/audio_example1_before.mp3" data-after="/es/audio_example1_after.mp3" data-type="mix">
      <img class="project-thumbnail" src="images/mix_example.png" alt="Mix 1">
      <h3>Mix Project 1</h3>
      <div class="audio-wrapper">
        <div class="controls"><button class="play-btn" aria-label="Reproducir"></button>
        <div class="progress"><input type="range" min="0" max="100" value="0" step="0.1"></div>
        <div class="time">0:00</div></div>
        <div class="toggle-wrapper"><span class="label-before">Before</span>
          <div class="toggle-btn"><div class="toggle-circle"></div></div>
          <span class="label-after">After</span>
        </div>
      </div>
    </div>

    <div class="project-card" data-before="/es/audio_example2_before.mp3" data-after="/es/audio_example2_after.mp3" data-type="mix">
      <img class="project-thumbnail" src="images/mix_example.png" alt="Mix 2">
      <h3>Mix Project 2</h3>
      <div class="audio-wrapper">
        <div class="controls"><button class="play-btn" aria-label="Reproducir"></button>
        <div class="progress"><input type="range" min="0" max="100" value="0" step="0.1"></div>
        <div class="time">0:00</div></div>
        <div class="toggle-wrapper"><span class="label-before">Before</span>
          <div class="toggle-btn"><div class="toggle-circle"></div></div>
          <span class="label-after">After</span>
        </div>
      </div>
    </div>

    <div class="project-card" data-before="/es/audio_example3_before.mp3" data-after="/es/audio_example3_after.mp3" data-type="mix">
      <img class="project-thumbnail" src="images/mix_example.png" alt="Mix 3">
      <h3>Mix Project 3</h3>
      <div class="audio-wrapper">
        <div class="controls"><button class="play-btn" aria-label="Reproducir"></button>
        <div class="progress"><input type="range" min="0" max="100" value="0" step="0.1"></div>
        <div class="time">0:00</div></div>
        <div class="toggle-wrapper"><span class="label-before">Before</span>
          <div class="toggle-btn"><div class="toggle-circle"></div></div>
          <span class="label-after">After</span>
        </div>
      </div>
    </div>

    <div class="project-card" data-before="/es/audio_example4_before.mp3" data-after="/es/audio_example4_after.mp3" data-type="mix">
      <img class="project-thumbnail" src="images/mix_example.png" alt="Mix 4">
      <h3>Mix Project 4</h3>
      <div class="audio-wrapper">
        <div class="controls"><button class="play-btn" aria-label="Reproducir"></button>
        <div class="progress"><input type="range" min="0" max="100" value="0" step="0.1"></div>
        <div class="time">0:00</div></div>
        <div class="toggle-wrapper"><span class="label-before">Before</span>
          <div class="toggle-btn"><div class="toggle-circle"></div></div>
          <span class="label-after">After</span>
        </div>
      </div>
    </div>
  </div>

  <h2 style="margin-top:2.5rem">Mastering Projects</h2>
  <div class="projects-grid">
    <div class="project-card" data-before="/es/audio_mastering/CHILL_HOUSE_NO_MASTERING.mp3" data-after="/es/audio_mastering/CHILL_HOUSE_MASTERING.mp3" data-type="master">
      <img class="project-thumbnail" src="images/MASTERING_EXAMPLE.png" alt="Master 1">
      <h3>Deep House Mastering</h3>
      <div class="audio-wrapper">
        <div class="controls"><button class="play-btn" aria-label="Reproducir"></button>
        <div class="progress"><input type="range" min="0" max="100" value="0" step="0.1"></div>
        <div class="time">0:00</div></div>
        <div class="toggle-wrapper"><span class="label-before">Before</span>
          <div class="toggle-btn"><div class="toggle-circle"></div></div>
          <span class="label-after">After</span>
        </div>
      </div>
    </div>

    <div class="project-card" data-before="/es/audio_mastering/Lillyhammer_Wicked_No_Mastering.mp3" data-after="/es/audio_mastering/Lillyhammer_Wicked_Mastering.mp3" data-type="master">
      <img class="project-thumbnail" src="images/Lilyhammerband.png" alt="Master 2">
      <h3>Lillyhammer - Wicked // Mastering</h3>
      <div class="audio-wrapper">
        <div class="controls"><button class="play-btn" aria-label="Reproducir"></button>
        <div class="progress"><input type="range" min="0" max="100" value="0" step="0.1"></div>
        <div class="time">0:00</div></div>
        <div class="toggle-wrapper"><span class="label-before">Before</span>
          <div class="toggle-btn"><div class="toggle-circle"></div></div>
          <span class="label-after">After</span>
        </div>
      </div>
    </div>
  </div>

</div>

<footer>
  <p>&copy; 2025 Suburbio Studios - MixMaster</p>
</footer>

<script>
(async function() {
  if (!(window.AudioContext || window.webkitAudioContext)) {
    alert('Tu navegador no soporta el Web Audio API. El reproductor puede no funcionar.');
    return;
  }

  const AudioCtx = window.AudioContext || window.webkitAudioContext;
  const audioCtx = new AudioCtx();

  function fmtTime(t) {
    if (!isFinite(t) || t < 0) return '0:00';
    const m = Math.floor(t / 60);
    const s = Math.floor(t % 60).toString().padStart(2,'0');
    return `${m}:${s}`;
  }

  async function loadBuffer(url) {
    const res = await fetch(url);
    if (!res.ok) throw new Error('Error cargando ' + url);
    const arrayBuffer = await res.arrayBuffer();
    return await audioCtx.decodeAudioData(arrayBuffer);
  }

  const PLAY_SVG = '<svg width="18" height="18" viewBox="0 0 24 24"><path d="M5 3v18l15-9L5 3z" fill="#FFFFFF"/></svg>';
  const PAUSE_SVG = '<svg width="18" height="18" viewBox="0 0 24 24"><rect x="5" y="4" width="4" height="16" fill="#FFFFFF"/><rect x="15" y="4" width="4" height="16" fill="#FFFFFF"/></svg>';

  document.querySelectorAll('.project-card').forEach(card => {
    const beforeUrl = card.dataset.before;
    const afterUrl = card.dataset.after;
    const playBtn = card.querySelector('.play-btn');
    const rangeEl = card.querySelector('input[type=range]');
    const timeEl = card.querySelector('.time');
    const toggle = card.querySelector('.toggle-btn');

    let beforeBuffer=null, afterBuffer=null, duration=0, isLoaded=false, isPlaying=false;
    let activeIsAfter=false, position=0, startTimestamp=0;
    let beforeGainNode=audioCtx.createGain(), afterGainNode=audioCtx.createGain(), masterGain=audioCtx.createGain();
    masterGain.gain.value=1; beforeGainNode.connect(masterGain); afterGainNode.connect(masterGain); masterGain.connect(audioCtx.destination);
    let beforeSource=null, afterSource=null;

    playBtn.innerHTML = PLAY_SVG;
    playBtn.setAttribute('aria-pressed','false');
    playBtn.disabled=true; toggle.classList.remove('ready');

    (async ()=>{
      try {
        beforeBuffer = await loadBuffer(beforeUrl);
        afterBuffer  = await loadBuffer(afterUrl);
        duration = Math.max(beforeBuffer.duration, afterBuffer.duration);
        rangeEl.max = Math.floor(duration*100)/100;
        isLoaded = true; playBtn.disabled=false; toggle.classList.add('ready');
        beforeGainNode.gain.value=1; afterGainNode.gain.value=0;
        timeEl.textContent = fmtTime(0)+' / '+fmtTime(duration);
      } catch(e){ console.error(e); timeEl.textContent='Error cargando audio'; }
    })();

    function createSources(offset=0){
      stopSources();
      beforeSource=audioCtx.createBufferSource(); beforeSource.buffer=beforeBuffer; beforeSource.connect(beforeGainNode);
      beforeSource.onended=()=>{ if(!isPlaying) return; const elapsed=audioCtx.currentTime-startTimestamp; if(position+elapsed>=duration-0.05) stop(); };
      afterSource=audioCtx.createBufferSource(); afterSource.buffer=afterBuffer; afterSource.connect(afterGainNode);
      afterSource.onended=()=>{ if(!isPlaying) return; const elapsed=audioCtx.currentTime-startTimestamp; if(position+elapsed>=duration-0.05) stop(); };
      const now=audioCtx.currentTime;
      try{ beforeSource.start(now, Math.min(offset,beforeBuffer.duration)); }catch(e){}
      try{ afterSource.start(now, Math.min(offset,afterBuffer.duration)); }catch(e){}
      startTimestamp=now;
    }

    function stopSources(){ try{ if(beforeSource){ beforeSource.onended=null; beforeSource.stop(0); }}catch(e){} try{ if(afterSource){ afterSource.onended=null; afterSource.stop(0); }}catch(e){} beforeSource=null; afterSource=null; }

    function play(){ if(!isLoaded) return; if(audioCtx.state==='suspended') audioCtx.resume(); createSources(position); isPlaying=true; startTimestamp=audioCtx.currentTime; playBtn.innerHTML=PAUSE_SVG; playBtn.setAttribute('aria-pressed','true'); raf(); }
    function pause(){ if(!isPlaying) return; position+=audioCtx.currentTime-startTimestamp; stopSources(); isPlaying=false; playBtn.innerHTML=PLAY_SVG; playBtn.setAttribute('aria-pressed','false'); }
    function stop(){ pause(); position=0; updateUI(); }
    function seek(toSec){ position=Math.min(Math.max(0,toSec),duration); if(isPlaying){ createSources(position); startTimestamp=audioCtx.currentTime; }else updateUI(); }
    function crossfade(toAfter,fadeTime=0.12){ const now=audioCtx.currentTime; beforeGainNode.gain.cancelScheduledValues(now); afterGainNode.gain.cancelScheduledValues(now); beforeGainNode.gain.setValueAtTime(beforeGainNode.gain.value,now); afterGainNode.gain.setValueAtTime(afterGainNode.gain.value,now); if(toAfter){ beforeGainNode.gain.linearRampToValueAtTime(0,now+fadeTime); afterGainNode.gain.linearRampToValueAtTime(1,now+fadeTime); }else{ beforeGainNode.gain.linearRampToValueAtTime(1,now+fadeTime); afterGainNode.gain.linearRampToValueAtTime(0,now+fadeTime); } }

    playBtn.addEventListener('click',()=>{ if(!isLoaded) return; if(!isPlaying){ beforeGainNode.gain.value=activeIsAfter?0:1; afterGainNode.gain.value=activeIsAfter?1:0; play(); }else pause(); });
    rangeEl.addEventListener('input',(e)=>seek(parseFloat(e.target.value)));
    toggle.addEventListener('click',()=>{ activeIsAfter=!activeIsAfter; toggle.classList.toggle('active',activeIsAfter); if(isPlaying) crossfade(activeIsAfter,0.12); else { beforeGainNode.gain.value=activeIsAfter?0:1; afterGainNode.gain.value=activeIsAfter?1:0; } });

    let rafId=null;
    function updateUI(){ const pos=isPlaying?(position+(audioCtx.currentTime-startTimestamp)):position; rangeEl.value=Math.min(pos,duration); timeEl.textContent=fmtTime(pos)+' / '+fmtTime(duration); }
    function raf(){ updateUI(); if(isPlaying) rafId=requestAnimationFrame(raf); else if(rafId) cancelAnimationFrame(rafId); }

    window.addEventListener('unload',()=>stopSources());
  });

})();
</script>
</body>
</html>
